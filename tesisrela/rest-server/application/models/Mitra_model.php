<?php

class Mitra_model extends CI_Model
{   
    //-------------------------------GET----------------------------------
    public function getMitra($id = null)
    {
        if($id === null){
            return $this->db->get('mitra')->result_array();
        } else {
            return $this->db->get_where('mitra', ['id_mitra' => $id])->result_array();
        }
    }


    //-------------------------------DELETE--------------------------------
    public function deleteMitra($id)
    {
        $this->db->delete('mitra', ['id_mitra' => $id]);
        return $this->db->affected_rows();
    }


    //----------------------------GET BY USER-----------------------------------
    // cek data di db mitra
    public function getMitraByUsername($username)
    {
        return $this->db->get_where('mitra', ['username' => $username])->result_array();
    }
     

    //-----------------------------CREATE----------------------------------------
    public function createMitra($data)
    {
        $this->db->insert('mitra', $data);
        return $this->db->affected_rows();
    }


    //------------------------------UPDATE----------------------------------------
    public function updateMitra($data, $id)
    {
        $this->db->update('mitra', $data, ['id_mitra' => $id]);
        return $this->db->affected_rows();
    }

    //upload foto
    public function uploadFoto($contents,$namaFoto)
    {
        $result = move_uploaded_file($contents, 'directory/foto/'.$namaFoto);
        return $result;
    }
}

?>