<?php
use Restserver\Libraries\REST_Controller;
defined('BASEPATH') or exit ('No direct script access allowed');

require APPPATH . 'libraries/REST_Controller.php';
require APPPATH . 'libraries/Format.php';


class Recent extends REST_Controller
{
    public function __construct()
    {
        parent::__construct();
        $this->load->model('Recent_model', 'recent');
    }

//Menampilkan/ mengambil data 
    public function index_get()
    {
        $recent = $this->recent->getRecent();     
        
        if($recent)
        {
            $this->response([
                'status' => 1,
                'data' => $recent
            ], REST_Controller::HTTP_OK); 
        } else {
            $this->response([
                'status' => 0,
                'message' => 'Gagal menampilkan recent!'
            ]); 
        }
    }


//Tambah data 
    public function index_post()
    {
        $data = [
            'waktu_input' => $this->post('waktu_input'),
            'file' => $this->post('file'),
            'sha256' => $this->post('sha256'),
            'status' => $this->post('status'),
            'aksi' => $this->post('aksi'),
            'oleh' => $this->post('oleh')
        ];
        
        if( $this->recent->createRecent($data) > 0){
            $this->response([
                'status' => 1,
                'message' => 'File baru berhasil ditambahkan!'
            ], REST_Controller::HTTP_CREATED); 
        } else {
            $this->response([
                'status' => 0,
                'message' => 'Gagal menambahkan data!'
            ]);
        }
    }

}



?>