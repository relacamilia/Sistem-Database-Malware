<?php 
session_start();
if( !isset($_SESSION["login"])){
	header("Location: login.php");
	exit;
}

//-------------------------------RESTFULL---------------------------------
require '../api/api_benign.php';
require '../api/api_recent.php';
require '../api/api_admin.php';

$ida = $_GET['ida'];
$admin = getAdminById($ida);

$id = $_GET["id"];
$ben = getBenignById($id);
$dataRec = [
	'file' => $ben["file_benign"],
	'sha256' => $ben["sha256_benign"],
	'status' => "Benign",
	'aksi' => "Dihapus",
	'oleh' => $admin["username"]
];

if( deleteBenign($id)>0) {

	//input ke recent
    if( createRecent($dataRec) === 0){
        echo "<script>
            alert('Data Gagal ditambahkan ke recent!');
            document.location.href = 'benign.php?ida=$ida';
            </script>";
	}

    //kalau berhasil	
    echo "<script>
         alert('Data BERHASIL Dihapus!');
	     document.location.href = 'benign.php?ida=$ida';
	     </script>";

//kalau gagal
} else {
	echo "<script>
		  alert('Data GAGAL Dihapus!');
		  document.location.href = 'benign.php?ida=$ida';
		  </script>";
}
?>